{% extends "base.html" %}

{% block content %}
<div class="container mx-auto my-4">
  <div class="my-6">
    <section class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">
      <h3 class="text-3xl text-center font-bold text-primary-700 mb-4">Main Portfolio</h3>
      <p class="text-2xl text-primary-700 font-medium">Name: {{ username }}</p>
      <p class="text-2xl text-primary-700 font-medium">Portfolio Worth: ${{ "{:,.2f}".format(portfolio_worth) }}</p>
      <p class="text-2xl text-primary-700 font-medium">Total Equity:
        <span {% if portfolio_equity >= 0 %}class="text-green-500"{% else %}class="text-red-500"{% endif %}>
          {% if portfolio_equity >= 0 %}+{% else %}-{% endif %}
          {{ "{:,.2f}".format(portfolio_equity) }}%
        </span>
      </p>
    </section>
  </div>
  <div>
    <a href="/{{user_id}}/transactions">
      <button
        type="button"
        class="mb-2 block w-full rounded border-2 border-primary px-6 pb-[6px] pt-2 text-xl font-medium uppercase leading-normal text-primary transition duration-150 ease-in-out hover:border-primary-600 hover:bg-neutral-500 hover:bg-opacity-10 hover:text-primary-600 focus:border-primary-600 focus:text-primary-600 focus:outline-none focus:ring-0 active:border-primary-700 active:text-primary-700 dark:hover:bg-neutral-100 dark:hover:bg-opacity-10"
        data-te-ripple-init>
        Go to transactions
      </button>
    </a>
  </div>
</div>

<div class="container mx-auto my-4">
  <br/>
  <br/>
  <br/>
  <br/>
  <h1 class="text-3xl bg-white text-primary-600 font-bold mb-2 text-center">Top 10 Cryptocurrencies</h1>
  <h3 class="text-lg bg-white text-primary-600 text-center">Displaying the latest Crypto prices from CoinmarketCap API</h3>

  <table class="min-w-full bg-white border border-gray-300 text-center">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th class="py-2 px-4 border-b">Name</th>
        <th class="py-2 px-4 border-b">Symbol</th>
        <th class="py-2 px-4 border-b">Slug</th>
        <th class="py-2 px-4 border-b">Price</th>
        <th class="py-2 px-4 border-b">Volume</th>
        <th class="py-2 px-4 border-b">24hr</th>
      </tr>
    </thead>
  
    <tbody>
      {% for obj in results %}
      <tr>
        <td class="py-2 px-4 border-b text-center">{{ loop.index }}</td>
        <td class="py-2 px-4 border-b text-center">{{ obj['name'] }}</td>
        <td class="py-2 px-4 border-b text-center">{{ obj['symbol'] }}</td>
        <td class="py-2 px-4 border-b text-center">{{ obj['slug'] }}</td>
        <td class="py-2 px-4 border-b text-center">{{ obj['quote']['USD']['price'] }}</td>
        <td class="py-2 px-4 border-b text-center">{{ obj['quote']['USD']['volume_24h'] }}</td>
        <td class="py-2 px-4 border-b text-center">{{ obj['quote']['USD']['percent_change_24h'] }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <br/>
  <br/>
  <a href="/news"><button
    type="button"
    class="mb-2 block w-full rounded border-2 border-primary px-6 pb-[6px] pt-2 text-xs font-medium uppercase leading-normal text-primary transition duration-150 ease-in-out hover:border-primary-600 hover:bg-neutral-500 hover:bg-opacity-10 hover:text-primary-600 focus:border-primary-600 focus:text-primary-600 focus:outline-none focus:ring-0 active:border-primary-700 active:text-primary-700 dark:hover:bg-neutral-100 dark:hover:bg-opacity-10"
    data-te-ripple-init>
    Check out the latest articles
  </button>
</div>
<br/>
<br/>
</a>
{% endblock %}